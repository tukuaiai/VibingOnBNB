# Unibase 长期记忆 - 实现说明

## 架构概览
- UI: 设置偏好 + 记忆面板  
- Memory: Membase（主）/SQLite（备）  
- Logic: 写入事件、读取偏好、影响策略推荐

## 记忆模型（最小）
```json
{
  "user_id": "anon",
  "preferences": {"risk": "low"},
  "last_actions": [],
  "events": []
}
```

## MVP 实施步骤
1) 接入 Membase 或 MCP 接口  
2) 用户操作完成后写入事件与偏好  
3) 页面加载时读取最近 N 条  
4) 基于偏好调整 UI 或默认策略  
5) 记忆面板支持查看与清理

## 关键实现要点
- 写入与读取必须可追踪（日志或面板）
- 记忆更新采用“合并 + 追加历史”

## 最小测试用例
- 用例 1：设置偏好 -> 刷新 -> 仍可读取  
- 用例 2：写入事件 -> 记忆面板可见  
- 用例 3：偏好影响默认参数

## 风险与备选
- Membase 接入复杂：切换本地 SQLite  
- 隐私担忧：默认匿名 + 一键清空

## 未来演进
- 语义检索与记忆压缩
- 多设备同步与迁移
