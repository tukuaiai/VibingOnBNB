# AEON x402 付费 Agent - 实现说明

## 架构概览
- Client/Agent -> x402 网关 -> 付费 API -> Facilitator -> BNB Chain
- 日志层记录：请求、支付凭证、交易回执

## 模块划分
- server/: 付费 API + 402 中间件
- client/: 自动支付与重试逻辑
- scripts/: 演示与验收脚本

## MVP 实施步骤
1) 拉起 AEON bnb-x402 示例并跑通 402 支付闭环  
2) 替换为自定义付费 API 路由（/paid 或 /analyze）  
3) 绑定固定价格与简单日志  
4) 客户端/Agent 发起请求，自动支付并重试  
5) 验收脚本输出：状态码、支付回执、业务响应

## 关键实现要点
- 402 响应必须携带正确的支付参数
- 支付完成后使用同一请求参数进行重试
- 日志需要可关联：请求 ID + 交易哈希

## 最小测试用例
- 用例 1：未支付请求 -> 402  
- 用例 2：自动支付后重试 -> 200  
- 用例 3：日志包含交易哈希与收据

## 风险与备选
- Facilitator 不可用：切换 openlibx402 或 openfacilitator  
- 测试网不稳定：临时本地链模拟 + 延迟上链演示

## 未来演进
- 动态定价（按 token 或时间）
- 多路支付与退款策略
